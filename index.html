<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Play Plants vs Zombies online for free! Defend your garden from zombies in this classic tower defense game. No download required.">
    <meta name="keywords" content="Plants vs Zombies, PVZ, online game, tower defense, free game, zombie game">
    <meta name="author" content="Big Z Games">
    <title>在线玩植物大战僵尸 - 免费塔防游戏 | BigZGame</title>
    <link rel="canonical" href="https://bigzgame.online">
    
    <!-- Cloudflare 优化 -->
    <meta http-equiv="Cache-Control" content="public, max-age=3600">
    <link rel="dns-prefetch" href="https://html-classic.itch.zone">
    <link rel="preconnect" href="https://html-classic.itch.zone" crossorigin>
    
    <!-- Favicon -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://bigzgame.online">
    <meta property="og:title" content="在线玩植物大战僵尸 - 免费塔防游戏">
    <meta property="og:description" content="在线玩植物大战僵尸！使用各种植物策略性地防御僵尸入侵，免费无需下载！">
    <meta property="og:image" content="https://bigzgame.online/pvz-banner.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://bigzgame.online">
    <meta property="twitter:title" content="在线玩植物大战僵尸 - 免费塔防游戏">
    <meta property="twitter:description" content="在线玩植物大战僵尸！使用各种植物策略性地防御僵尸入侵，免费无需下载！">
    <meta property="twitter:image" content="https://bigzgame.online/pvz-banner.jpg">
    
    <!-- 关键CSS内联 -->
    <style type="text/css">
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #F2F2F7;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        
        h1 {
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            color: #007AFF;
            margin: 15px 0;
        }
        
        .instruction {
            text-align: center;
            margin: 15px auto;
            max-width: 90%;
            color: #333;
            font-size: 1rem;
        }
        
        .game-container {
            width: 100%;
            height: calc(100vh - 130px); /* 保留一些空间给标题和说明 */
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            background-color: #F2F2F7;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .game-frame {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }
        
        .loader {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #F2F2F7;
            z-index: 10;
            transition: opacity 0.5s ease;
        }
        
        .loader.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #007AFF;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
        
        /* 控制按钮容器 */
        .control-container {
            position: absolute;
            bottom: 10px;
            right: 10px;
            z-index: 5;
            display: flex;
            gap: 5px;
        }
        
        /* 控制按钮 */
        .control-btn {
            background: rgba(0, 122, 255, 0.8);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 8px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .control-btn:hover {
            background: rgba(0, 122, 255, 1);
        }
        
        /* 媒体查询：手机竖屏 */
        @media (max-width: 768px) and (orientation: portrait) {
            .game-container {
                height: calc(100vh - 100px);
            }
            
            h1 {
                font-size: 1.5rem;
                margin: 10px 0;
            }
            
            .instruction {
                font-size: 0.9rem;
                margin: 10px auto;
            }
        }
        
        /* 媒体查询：手机横屏 */
        @media (max-width: 896px) and (orientation: landscape) {
            h1 {
                font-size: 1.3rem;
                margin: 5px 0;
            }
            
            .instruction {
                font-size: 0.8rem;
                margin: 5px auto;
            }
            
            .game-container {
                height: calc(100vh - 70px);
            }
        }
    </style>
</head>

<body>
    <h1>在线玩植物与僵尸</h1>
    <p class="instruction">使用鼠标或触控来放置植物，策略性地阻挡僵尸！可以点击右下角按钮全屏游戏。</p>
    
    <div class="game-container" id="game-container">
        <div class="loader" id="game-loader">
            <div class="spinner"></div>
        </div>
        <iframe id="game-frame" class="game-frame" src="https://html-classic.itch.zone/html/5049297/index.html" allowfullscreen allow="fullscreen" sandbox="allow-scripts allow-same-origin allow-forms allow-pointer-lock allow-popups"></iframe>
        
        <div class="control-container">
            <button class="control-btn" id="fullscreen-btn">全屏</button>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 获取元素
            const gameFrame = document.getElementById('game-frame');
            const gameLoader = document.getElementById('game-loader');
            const gameContainer = document.getElementById('game-container');
            const fullscreenBtn = document.getElementById('fullscreen-btn');
            
            // 监听 iframe 加载完成事件
            gameFrame.onload = function() {
                // 隐藏加载动画
                setTimeout(function() {
                    gameLoader.classList.add('hidden');
                }, 500);
            };
            
            // 全屏功能
            fullscreenBtn.addEventListener('click', function() {
                toggleFullscreen(gameContainer);
            });
            
            // 封装全屏切换功能
            function toggleFullscreen(element) {
                if (!document.fullscreenElement &&
                    !document.mozFullScreenElement &&
                    !document.webkitFullscreenElement &&
                    !document.msFullscreenElement) {
                    // 进入全屏
                    if (element.requestFullscreen) {
                        element.requestFullscreen();
                    } else if (element.msRequestFullscreen) {
                        element.msRequestFullscreen();
                    } else if (element.mozRequestFullScreen) {
                        element.mozRequestFullScreen();
                    } else if (element.webkitRequestFullscreen) {
                        element.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
                    }
                } else {
                    // 退出全屏
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    } else if (document.msExitFullscreen) {
                        document.msExitFullscreen();
                    } else if (document.mozCancelFullScreen) {
                        document.mozCancelFullScreen();
                    } else if (document.webkitExitFullscreen) {
                        document.webkitExitFullscreen();
                    }
                }
            }
            
            // 修复iOS上iframe可能被视口限制的问题
            function fixIOSIframe() {
                if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {
                    gameContainer.style.height = `${window.innerHeight - 100}px`;
                }
            }
            
            // 初始调用
            fixIOSIframe();
            
            // 监听窗口大小变化
            window.addEventListener('resize', fixIOSIframe);
            
            // 修复屏幕旋转问题
            window.addEventListener('orientationchange', function() {
                setTimeout(fixIOSIframe, 100);
            });
            
            // 处理iOS上的滑动问题
            document.body.addEventListener('touchmove', function(e) {
                if (e.target !== gameFrame) {
                    e.preventDefault();
                }
            }, { passive: false });
            
            // 防止双击缩放（移动端）
            document.addEventListener('dblclick', function(e) {
                e.preventDefault();
            }, { passive: false });
        });
    </script>
    
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "VideoGame",
        "name": "植物大战僵尸 在线版",
        "description": "在线玩植物大战僵尸！使用各种植物策略性地防御僵尸入侵，免费无需下载！",
        "genre": "塔防游戏",
        "playMode": "SinglePlayer",
        "applicationCategory": "BrowserGame",
        "operatingSystem": "Windows, macOS, Android, iOS",
        "gamePlatform": "Web Browser",
        "url": "https://bigzgame.online",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD",
            "availability": "https://schema.org/InStock"
        }
    }
    </script>
</body>
</html>